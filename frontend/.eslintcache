[{"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/index.tsx":"1","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/styles/global.ts":"2","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserRegister/index.tsx":"3","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserLogin/index.tsx":"4","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/PodcastRegister/styles.ts":"5","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserLogin/styles.ts":"6","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/CardContainer/index.tsx":"7","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/CardContainer/styles.ts":"8","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/App.tsx":"9","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/context/AuthContext.ts":"10","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/PodcastRegister/index.tsx":"11","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/services/api.ts":"12","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/Header/index.tsx":"13","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/Header/styles.ts":"14","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserRegister/styles.ts":"15","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Podcast/styles.ts":"16","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/reportWebVitals.ts":"17","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Podcast/index.tsx":"18","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Episode/styles.ts":"19","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/routes/index.tsx":"20"},{"size":270,"mtime":1618450650300,"results":"21","hashOfConfig":"22"},{"size":387,"mtime":1618450650300,"results":"23","hashOfConfig":"22"},{"size":3338,"mtime":1618450650300,"results":"24","hashOfConfig":"22"},{"size":2262,"mtime":1618450650300,"results":"25","hashOfConfig":"22"},{"size":1998,"mtime":1618532019831,"results":"26","hashOfConfig":"22"},{"size":1970,"mtime":1618531376008,"results":"27","hashOfConfig":"22"},{"size":7763,"mtime":1618450650296,"results":"28","hashOfConfig":"22"},{"size":2395,"mtime":1618532023163,"results":"29","hashOfConfig":"22"},{"size":311,"mtime":1618450650296,"results":"30","hashOfConfig":"22"},{"size":343,"mtime":1618450650300,"results":"31","hashOfConfig":"22"},{"size":3798,"mtime":1618532557508,"results":"32","hashOfConfig":"22"},{"size":114,"mtime":1618450650300,"results":"33","hashOfConfig":"22"},{"size":1885,"mtime":1618450650296,"results":"34","hashOfConfig":"22"},{"size":1197,"mtime":1618450650296,"results":"35","hashOfConfig":"22"},{"size":1888,"mtime":1618531373624,"results":"36","hashOfConfig":"22"},{"size":4300,"mtime":1618532025235,"results":"37","hashOfConfig":"22"},{"size":458,"mtime":1618450650300,"results":"38","hashOfConfig":"22"},{"size":11264,"mtime":1618450650300,"results":"39","hashOfConfig":"22"},{"size":1478,"mtime":1618450650300,"results":"40","hashOfConfig":"22"},{"size":1190,"mtime":1618450650300,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1q8cf3n",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"78","messages":"79","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"44"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/index.tsx",[],[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/styles/global.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserRegister/index.tsx",[],[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserLogin/index.tsx",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/PodcastRegister/styles.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserLogin/styles.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/CardContainer/index.tsx",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/CardContainer/styles.ts",["85"],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/App.tsx",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/context/AuthContext.ts",["86"],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/PodcastRegister/index.tsx",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/services/api.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/Header/index.tsx",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/Components/Header/styles.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/UserRegister/styles.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Podcast/styles.ts",["87"],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/reportWebVitals.ts",["88"],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Podcast/index.tsx",["89","90","91"],"import React, { FormEvent, useContext, useEffect, useState } from 'react'\nimport { FiRss, FiGlobe, FiMail, FiBarChart2, FiSend } from 'react-icons/fi'\nimport convert from 'xml-js'\nimport axios from 'axios'\nimport StarPicker from 'react-star-picker'\n\nimport { About, Buttons, Card, Comment, CommentCard, Container, Info, Message, PodcastCard, SendContainer, Stats, Subscribe } from './styles'\nimport api from '../../services/api'\nimport Header from '../../Components/Header'\nimport CommentImg from '../../assets/comments.png'\nimport StarsImg from '../../assets/stars.png'\nimport { useRouteMatch } from 'react-router-dom'\nimport AuthContext from '../../context/AuthContext'\nimport Episode from '../Episode'\n\ninterface Props {\n    podcastUrl: string\n    podcastId: string\n    userId: string\n}\n\ninterface Podcast {\n    name: string\n    description: string\n    imageUrl: string\n    episodes: Episode[]\n    stars?: number\n    userStars?: number\n    comments?: number\n    subscribed?: boolean\n    site?: string\n    email?: string\n    feed?: string\n}\n\ninterface Episode {\n    id: string\n    name: string\n    image?: string\n    audio?: string\n}\n\ninterface Params {\n    id: string\n}\n\nconst Podcast: React.FC<Props> = () => {\n    const [podcast, setPodcast] = useState<Podcast>()\n    const [showComment, setShowComment] = useState(false)\n    const [comments, setComments] = useState<string[]>([])\n\n    const [message, setMessage] = useState('')\n\n    const { podcastUrl, id:userId, logged } = useContext(AuthContext)\n\n    const { params } = useRouteMatch<Params>()\n    const podcastId = params.id\n\n    useEffect(() => {\n        const data = async () => {\n            const result = await axios.get(`${ podcastUrl }`, {\n                headers:{'Content-Type': 'application/x-www-form-urlencoded'}\n            })\n            const json = JSON.parse(convert.xml2json(result.data, {compact: true, spaces: 4}))\n            console.log(json)\n            if(logged) {\n                const additional = await api.get(`podcast/statistics/${podcastId}/${userId}`)\n\n                setPodcast({\n                    name: Object.values(json.rss.channel.title)[0] as string,\n                    description: Object.values(json.rss.channel.description)[0] as string,\n                    imageUrl: Array.isArray(json.rss.channel.image) ? Object.values(json.rss.channel.image[1].url)[0] as string : Object.values(json.rss.channel.image.url)[0] as string,\n                    episodes: json.rss.channel.item.map( (episode: any) => {\n                        return {\n                            id: episode.guid._text,\n                            name: Object.values(episode.title)[0],\n                            image: episode['itunes:image'] ? episode['itunes:image']._attributes.href : Array.isArray(json.rss.channel.image) ? Object.values(json.rss.channel.image[1].url)[0] as string : Object.values(json.rss.channel.image.url)[0] as string,\n                            audio: episode.enclosure._attributes.url\n                        }\n                    }),\n                    stars: additional.data.estrelas,\n                    userStars: additional.data.estrelas_do_usuario,\n                    comments: additional.data.comentarios,\n                    subscribed: additional.data.inscrito,\n                    site: additional.data.site,\n                    email: additional.data.email,\n                    feed: additional.data.feed_rss,\n                })\n\n            } else {\n                setPodcast({\n                    name: Object.values(json.rss.channel.title)[0] as string,\n                    description: Object.values(json.rss.channel.description)[0] as string,\n                    imageUrl: Array.isArray(json.rss.channel.image) ? Object.values(json.rss.channel.image[1].url)[0] as string : Object.values(json.rss.channel.image.url)[0] as string,\n                    episodes: json.rss.channel.item.map( (episode: any) => {\n                        return {\n                            id: episode.guid._text,\n                            name: Object.values(episode.title)[0],\n                            image: episode['itunes:image'] ? episode['itunes:image']._attributes.href : Array.isArray(json.rss.channel.image) ? Object.values(json.rss.channel.image[1].url)[0] as string : Object.values(json.rss.channel.image.url)[0] as string,\n                            audio: episode.enclosure._attributes.url\n                        }\n                    })\n                })\n            }\n            console.log(podcast)\n        }\n        data()\n    }, [podcastUrl, podcast?.userStars])\n\n    const handleSubscribe = async () => {\n        console.log(podcast)\n        if(podcast?.subscribed) {\n            await api.delete(`inscrever/${userId}/${podcastId}`)\n            setPodcast({\n                ...podcast,\n                subscribed: false\n            })\n        } else if(podcast?.subscribed == false) {\n            await api.post('inscrever/', {\n                usr_id: userId,\n                pod_id: podcastId,\n                classificacao: 0\n            })\n            setPodcast({\n                ...podcast,\n                subscribed: true\n            })\n        }\n    }\n\n    const handleStars = async (value: number) => {\n        if(podcast){\n            setPodcast({\n                ...podcast,\n                userStars: value\n            })\n\n            await api.put(`inscrever/${userId}/${podcastId}`, {\n                usr_id: userId,\n                pod_id: podcastId,\n                classificacao: value\n            })\n        }\n    }\n\n    const handleShowComment = async() => {\n        if(!showComment && comments.length == 0) {\n            const comms = await api.get(`comentario/${podcastId}`)\n            setComments(comms.data.comments.map( (comment:any) => comment.comentario ))\n        }\n        setShowComment(!showComment)\n    }\n\n    const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n        event.preventDefault()\n        await api.post('comentario/', {\n            pod_id: podcastId,\n            usr_id: userId,\n            comentario: message\n        })\n\n        const newCom = comments\n        newCom.push(message)\n        setComments(newCom)\n\n        setMessage('')\n        if(podcast) {\n            setPodcast({\n                ...podcast,\n                comments: comments.length\n            })\n        }\n    }\n\n    return (\n        <>\n            <Header/>\n            <Container>\n                <Card>\n                    <Info>\n                        <PodcastCard about={ podcast?.imageUrl }/>\n                        <About>\n                            <h1>{ podcast?.name }</h1>\n                            <p>{ podcast?.description }</p>\n                            {\n                                logged ? (\n                                    <>\n                                        <Stats>\n                                            <img src={StarsImg} />\n                                            <h1>{ podcast?.stars ? podcast?.stars : 0 }</h1>\n                                            <img style={{cursor: 'pointer'}} onClick={handleShowComment} src={CommentImg} />\n                                            <h1 style={{cursor: 'pointer'}} onClick={handleShowComment} >{`${ podcast?.comments ? podcast?.comments : 0 } comentários`}</h1>\n                                        </Stats>\n                                        <Buttons>\n                                            <a href={podcast?.site}><FiGlobe color='#fff' size='1.9vw' /></a>\n                                            {\n                                                podcast?.email && <a href={`mailto:${podcast?.email}`}><FiMail color='#fff' size='1.9vw' /></a>\n                                            }\n                                            <a href={podcast?.feed}><FiRss color='#fff' size='1.9vw' /></a>\n                                            <a href='/'><FiBarChart2 color='#fff' size='1.9vw' /></a>\n                                            {\n                                                logged && <StarPicker onChange={(value) => handleStars(value ? value : 0)} value={podcast?.userStars ? podcast.userStars : 0} />\n                                            }\n                                        </Buttons>\n                                    </>\n                                ) : (\n                                    <>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                        <div></div>\n                                    </>\n                                )\n                            }\n                        </About>\n                        {\n                            logged && (\n                                <Subscribe onClick={handleSubscribe}>\n                                    { podcast?.subscribed ? 'Inscrito' : 'Inscrever' }\n                                </Subscribe>\n                            )\n                        }\n                    </Info>\n                    {\n                        showComment ? (\n                            <CommentCard>\n                                <div>\n                                    {\n                                        comments.map(\n                                            comment => {\n                                                return (\n                                                    <Comment key={comment}>\n                                                        <p>{ comment }</p>\n                                                    </Comment>\n                                                )\n                                            }\n                                        )\n                                    }\n                                </div>\n                                <SendContainer onSubmit={(event) => handleSubmit(event)}>\n                                    <Message placeholder='Digite sua mensagem' value={message} onChange={(event) => setMessage(event.target.value)} />\n                                    <button type='submit'>\n                                        <FiSend color='#fff' size='1.9vw' />\n                                    </button>\n                                </SendContainer>\n                            </CommentCard>\n                        ) : (<></>)\n                    }\n                    {\n                        podcast?.episodes.map( episode => {\n                            return (\n                                <Episode\n                                    key={episode.id}\n                                    id={episode.id}\n                                    image={episode.image ? episode.image : ''}\n                                    name={episode.name}\n                                    podcastId={podcastId}\n                                    audioUrl={episode.audio ? episode.audio : ''}\n                                />\n                            )\n                        })\n                    }\n                </Card>\n            </Container>\n        </>\n    )\n}\n\nexport default Podcast\n","/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/pages/Episode/styles.ts",[],"/home/renan/Documentos/UEL/trabalho_bancos_de_dados/frontend/src/routes/index.tsx",[],{"ruleId":"92","severity":1,"message":"93","line":2,"column":10,"nodeType":"94","messageId":"95","endLine":2,"endColumn":15},{"ruleId":"92","severity":1,"message":"96","line":1,"column":8,"nodeType":"94","messageId":"95","endLine":1,"endColumn":13},{"ruleId":"92","severity":1,"message":"93","line":1,"column":10,"nodeType":"94","messageId":"95","endLine":1,"endColumn":15},{"ruleId":"97","severity":1,"message":"98","line":3,"column":25,"nodeType":"99","messageId":"100","endLine":3,"endColumn":57},{"ruleId":"101","severity":1,"message":"102","line":73,"column":68,"nodeType":"103","messageId":"104","endLine":73,"endColumn":71,"suggestions":"105"},{"ruleId":"101","severity":1,"message":"102","line":95,"column":68,"nodeType":"103","messageId":"104","endLine":95,"endColumn":71,"suggestions":"106"},{"ruleId":"101","severity":1,"message":"102","line":149,"column":59,"nodeType":"103","messageId":"104","endLine":149,"endColumn":62,"suggestions":"107"},"@typescript-eslint/no-unused-vars","'shade' is defined but never used.","Identifier","unusedVar","'React' is defined but never used.","@typescript-eslint/explicit-module-boundary-types","Missing return type on function.","ArrowFunctionExpression","missingReturnType","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["108","109"],["110","111"],["112","113"],{"messageId":"114","fix":"115","desc":"116"},{"messageId":"117","fix":"118","desc":"119"},{"messageId":"114","fix":"120","desc":"116"},{"messageId":"117","fix":"121","desc":"119"},{"messageId":"114","fix":"122","desc":"116"},{"messageId":"117","fix":"123","desc":"119"},"suggestUnknown",{"range":"124","text":"125"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"124","text":"126"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"127","text":"125"},{"range":"127","text":"126"},{"range":"128","text":"125"},{"range":"128","text":"126"},[2496,2499],"unknown","never",[3917,3920],[5781,5784]]
